(window.webpackJsonp=window.webpackJsonp||[]).push([[88],{495:function(s,a,n){"use strict";n.r(a);var t=n(56),e=Object(t.a)({},(function(){var s=this,a=s.$createElement,n=s._self._c||a;return n("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[n("h1",{attrs:{id:"k3s"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#k3s"}},[s._v("#")]),s._v(" k3s")]),s._v(" "),n("h2",{attrs:{id:"vagrantfile"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#vagrantfile"}},[s._v("#")]),s._v(" Vagrantfile")]),s._v(" "),n("div",{staticClass:"language-ruby line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-ruby"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# -*- mode: ruby -*-")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# vi: set ft=ruby :")]),s._v("\n\nVagrant"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("configure"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string-literal"}},[n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"2"')])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("do")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("config"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v(".3")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("each")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("do")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("i"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n    config"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("vm"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("define "),n("span",{pre:!0,attrs:{class:"token string-literal"}},[n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"k3s-master-')]),n("span",{pre:!0,attrs:{class:"token interpolation"}},[n("span",{pre:!0,attrs:{class:"token delimiter punctuation"}},[s._v("#{")]),n("span",{pre:!0,attrs:{class:"token content"}},[s._v("i")]),n("span",{pre:!0,attrs:{class:"token delimiter punctuation"}},[s._v("}")])]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"')])]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("do")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("vb"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("  \n      vb"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("vm"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("box "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string-literal"}},[n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"generic/ubuntu2204"')])]),s._v("\n      vb"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("vm"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("hostname "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string-literal"}},[n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"k3s-master-')]),n("span",{pre:!0,attrs:{class:"token interpolation"}},[n("span",{pre:!0,attrs:{class:"token delimiter punctuation"}},[s._v("#{")]),n("span",{pre:!0,attrs:{class:"token content"}},[s._v("i")]),n("span",{pre:!0,attrs:{class:"token delimiter punctuation"}},[s._v("}")])]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"')])]),s._v("\n      vb"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("vm"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("network "),n("span",{pre:!0,attrs:{class:"token string-literal"}},[n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"public_network"')])]),s._v("\n      vb"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("vm"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("network "),n("span",{pre:!0,attrs:{class:"token string-literal"}},[n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"private_network"')])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token symbol"}},[s._v("ip")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string-literal"}},[n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"192.168.30.')]),n("span",{pre:!0,attrs:{class:"token interpolation"}},[n("span",{pre:!0,attrs:{class:"token delimiter punctuation"}},[s._v("#{")]),n("span",{pre:!0,attrs:{class:"token content"}},[n("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v("i")]),n("span",{pre:!0,attrs:{class:"token delimiter punctuation"}},[s._v("}")])]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"')])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token symbol"}},[s._v("netmask")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string-literal"}},[n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"255.255.255.0"')])]),s._v("\n      "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v('# config.vm.synced_folder "../data", "/vagrant_data"')]),s._v("\n      "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v('# config.vm.synced_folder ".", "/vagrant", disabled: true')]),s._v("\n  \n      vb"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("vm"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("provider "),n("span",{pre:!0,attrs:{class:"token string-literal"}},[n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"vmware_desktop"')])]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("do")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("v"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n        v"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("gui "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),s._v("\n        v"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("cpus "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v("\n        v"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("memory "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string-literal"}},[n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"4096"')])]),s._v("\n      "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("end")]),s._v("\n      vb"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("vm"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("provision "),n("span",{pre:!0,attrs:{class:"token string-literal"}},[n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"shell"')])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token symbol"}},[s._v("inline")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string-literal heredoc-string"}},[n("span",{pre:!0,attrs:{class:"token delimiter"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<<-")]),n("span",{pre:!0,attrs:{class:"token symbol"}},[s._v("SHELL")])]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('\n        lvextend /dev/ubuntu-vg/ubuntu-lv /dev/sda3\n        resize2fs /dev/ubuntu-vg/ubuntu-lv\n        df -h /\n        # sudo apt-get update -y\n        sudo ufw disable\n\n        #关闭swap\n        sudo swapoff -a  \n        sudo sed -ri \'s/.*swap.*/#&/\' /etc/fstab\n        INSTALL_K3S_MIRROR=cn\n        INSTALL_K3S_EXEC="server"\n        K3S_TOKEN="k3stoekn123456"\n\n        # 3个master，若干个worker\n        # 第一个master，相当于集群初始化\n        # sudo curl -sfL https://rancher-mirror.rancher.cn/k3s/k3s-install.sh  | INSTALL_K3S_MIRROR=cn K3S_TOKEN=k3sha123456  sh -s - server --cluster-init\n        # 其余两个master，加入到第一个的集群当中\n        # sudo curl -sfL https://rancher-mirror.rancher.cn/k3s/k3s-install.sh  | INSTALL_K3S_MIRROR=cn K3S_TOKEN=k3sha123456  sh -s - server --server https://192.168.30.11:6443\n        # worker节点\n        # sudo curl -sfL https://rancher-mirror.rancher.cn/k3s/k3s-install.sh  | INSTALL_K3S_MIRROR=cn INSTALL_K3S_EXEC="agent" K3S_TOKEN="k3sha123456"  K3S_URL=https://192.168.30.11:6443 sh -\n   \n        # vagrant ssh k3s-master-1 -c \'sudo curl -sfL https://rancher-mirror.rancher.cn/k3s/k3s-install.sh  | INSTALL_K3S_MIRROR=cn K3S_TOKEN=k3sha123456  sh -s - server --cluster-init\'\n        # vagrant ssh k3s-master-2 -c \'sudo curl -sfL https://rancher-mirror.rancher.cn/k3s/k3s-install.sh  | INSTALL_K3S_MIRROR=cn K3S_TOKEN=k3sha123456  sh -s - server --server https://192.168.30.11:6443\'\n        # vagrant ssh k3s-master-3 -c \'sudo curl -sfL https://rancher-mirror.rancher.cn/k3s/k3s-install.sh  | INSTALL_K3S_MIRROR=cn K3S_TOKEN=k3sha123456  sh -s - server --server https://192.168.30.11:6443\'\n        # vagrant ssh k3s-worker-1 -c \'sudo curl -sfL https://rancher-mirror.rancher.cn/k3s/k3s-install.sh  | INSTALL_K3S_MIRROR=cn INSTALL_K3S_EXEC="agent" K3S_TOKEN="k3sha123456"  K3S_URL=https://192.168.30.11:6443 sh -\'\n        # vagrant ssh k3s-worker-2 -c \'sudo curl -sfL https://rancher-mirror.rancher.cn/k3s/k3s-install.sh  | INSTALL_K3S_MIRROR=cn INSTALL_K3S_EXEC="agent" K3S_TOKEN="k3sha123456"  K3S_URL=https://192.168.30.11:6443 sh -\'\n        # vagrant ssh k3s-worker-3 -c \'sudo curl -sfL https://rancher-mirror.rancher.cn/k3s/k3s-install.sh  | INSTALL_K3S_MIRROR=cn INSTALL_K3S_EXEC="agent" K3S_TOKEN="k3sha123456"  K3S_URL=https://192.168.30.11:6443 sh -\'\n\n        # 卸载\n        ## 卸载 master\n        # vagrant ssh k3s-worker-2 -c \'/usr/local/bin/k3s-uninstall.sh\'\n        ## 卸载 agent\n        # vagrant ssh k3s-worker-2 -c \'/usr/local/bin/k3s-agent-uninstall.sh\'\n\n        # 查看节点信息\n        # root@k3s-master-1:/home/vagrant# kubectl get nodes -o wide\n        # NAME           STATUS   ROLES                       AGE     VERSION        INTERNAL-IP       EXTERNAL-IP   OS-IMAGE             KERNEL-VERSION      CONTAINER-RUNTIME\n        # k3s-master-1   Ready    control-plane,etcd,master   16m     v1.27.7+k3s2   192.168.234.163   <none>        Ubuntu 22.04.3 LTS   5.15.0-84-generic   containerd://1.7.7-k3s1.27\n        # k3s-master-2   Ready    control-plane,etcd,master   12m     v1.27.7+k3s2   192.168.234.164   <none>        Ubuntu 22.04.3 LTS   5.15.0-84-generic   containerd://1.7.7-k3s1.27\n        # k3s-master-3   Ready    control-plane,etcd,master   9m37s   v1.27.7+k3s2   192.168.234.165   <none>        Ubuntu 22.04.3 LTS   5.15.0-84-generic   containerd://1.7.7-k3s1.27\n        # k3s-worker-1   Ready    <none>                      14m     v1.27.7+k3s2   192.168.234.166   <none>        Ubuntu 22.04.3 LTS   5.15.0-84-generic   containerd://1.7.7-k3s1.27\n        # k3s-worker-2   Ready    <none>                      72s     v1.27.7+k3s2   192.168.234.167   <none>        Ubuntu 22.04.3 LTS   5.15.0-84-generic   containerd://1.7.7-k3s1.27\n        # k3s-worker-3   Ready    <none>                      6m22s   v1.27.7+k3s2   192.168.234.168   <none>        Ubuntu 22.04.3 LTS   5.15.0-84-generic   containerd://1.7.7-k3s1.27\n        # 查看pod\n        # root@k3s-master-1:/home/vagrant# kubectl get pods -A -o wide\n        # NAMESPACE     NAME                                     READY   STATUS      RESTARTS   AGE     IP          NODE           NOMINATED NODE   READINESS GATES\n        # kube-system   coredns-77ccd57875-4rrdn                 1/1     Running     0          17m     10.42.0.4   k3s-master-1   <none>           <none>\n        # kube-system   helm-install-traefik-bzpzz               0/1     Completed   1          17m     10.42.0.3   k3s-master-1   <none>           <none>\n        # kube-system   helm-install-traefik-crd-4gwrd           0/1     Completed   0          17m     10.42.0.2   k3s-master-1   <none>           <none>\n        # kube-system   local-path-provisioner-957fdf8bc-dphbc   1/1     Running     0          17m     10.42.0.6   k3s-master-1   <none>           <none>\n        # kube-system   metrics-server-648b5df564-n8m6s          1/1     Running     0          17m     10.42.0.5   k3s-master-1   <none>           <none>\n        # kube-system   svclb-traefik-00740945-2pjq4             2/2     Running     0          3m1s    10.42.5.2   k3s-worker-2   <none>           <none>\n        # kube-system   svclb-traefik-00740945-9w9t2             2/2     Running     0          17m     10.42.0.7   k3s-master-1   <none>           <none>\n        # kube-system   svclb-traefik-00740945-j4w59             2/2     Running     0          8m11s   10.42.4.2   k3s-worker-3   <none>           <none>\n        # kube-system   svclb-traefik-00740945-pp4dr             2/2     Running     0          11m     10.42.3.2   k3s-master-3   <none>           <none>\n        # kube-system   svclb-traefik-00740945-tqgl8             2/2     Running     0          14m     10.42.2.2   k3s-master-2   <none>           <none>\n        # kube-system   svclb-traefik-00740945-wpcmf             2/2     Running     0          15m     10.42.1.2   k3s-worker-1   <none>           <none>\n        # kube-system   traefik-768bdcdcdd-cvtm2                 1/1     Running     0          17m     10.42.0.8   k3s-master-1   <none>           <none>\n\n\n        # 单master\n        # sudo curl -sfL https://rancher-mirror.rancher.cn/k3s/k3s-install.sh  | INSTALL_K3S_MIRROR=cn INSTALL_K3S_EXEC="server"  K3S_TOKEN="k3sha123456" sh -\n        # worker节点\n        # sudo curl -sfL https://rancher-mirror.rancher.cn/k3s/k3s-install.sh  | INSTALL_K3S_MIRROR=cn INSTALL_K3S_EXEC="agent" K3S_TOKEN="k3sha123456"  K3S_URL=https://192.168.30.10:6443 sh -\n  \n\n        # 二进制运行\n        # curl -Lo /usr/local/bin/k3s https://github.com/k3s-io/k3s/releases/download/v1.26.5+k3s1/k3s; chmod a+x /usr/local/bin/k3s\n        # k3s server --write-kubeconfig-mode=644\n        # k3s agent --server https://k3s.example.com --token mypassword\n\n      ')]),n("span",{pre:!0,attrs:{class:"token delimiter"}},[n("span",{pre:!0,attrs:{class:"token symbol"}},[s._v("SHELL")])])]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("end")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("end")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v(".3")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("each")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("do")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("i"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n    config"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("vm"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("define "),n("span",{pre:!0,attrs:{class:"token string-literal"}},[n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"k3s-worker-')]),n("span",{pre:!0,attrs:{class:"token interpolation"}},[n("span",{pre:!0,attrs:{class:"token delimiter punctuation"}},[s._v("#{")]),n("span",{pre:!0,attrs:{class:"token content"}},[s._v("i")]),n("span",{pre:!0,attrs:{class:"token delimiter punctuation"}},[s._v("}")])]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"')])]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("do")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("vb"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("  \n      vb"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("vm"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("box "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string-literal"}},[n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"generic/ubuntu2204"')])]),s._v("\n      vb"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("vm"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("hostname "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string-literal"}},[n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"k3s-worker-')]),n("span",{pre:!0,attrs:{class:"token interpolation"}},[n("span",{pre:!0,attrs:{class:"token delimiter punctuation"}},[s._v("#{")]),n("span",{pre:!0,attrs:{class:"token content"}},[s._v("i")]),n("span",{pre:!0,attrs:{class:"token delimiter punctuation"}},[s._v("}")])]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"')])]),s._v("\n      vb"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("vm"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("network "),n("span",{pre:!0,attrs:{class:"token string-literal"}},[n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"public_network"')])]),s._v("\n      vb"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("vm"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("network "),n("span",{pre:!0,attrs:{class:"token string-literal"}},[n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"private_network"')])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token symbol"}},[s._v("ip")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string-literal"}},[n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"192.168.30.')]),n("span",{pre:!0,attrs:{class:"token interpolation"}},[n("span",{pre:!0,attrs:{class:"token delimiter punctuation"}},[s._v("#{")]),n("span",{pre:!0,attrs:{class:"token content"}},[n("span",{pre:!0,attrs:{class:"token number"}},[s._v("20")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v("i")]),n("span",{pre:!0,attrs:{class:"token delimiter punctuation"}},[s._v("}")])]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"')])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token symbol"}},[s._v("netmask")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string-literal"}},[n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"255.255.255.0"')])]),s._v("\n      "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v('# config.vm.synced_folder "../data", "/vagrant_data"')]),s._v("\n      "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v('# config.vm.synced_folder ".", "/vagrant", disabled: true')]),s._v("\n  \n      vb"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("vm"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("provider "),n("span",{pre:!0,attrs:{class:"token string-literal"}},[n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"vmware_desktop"')])]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("do")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("v"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n        v"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("gui "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),s._v("\n        v"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("cpus "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v("\n        v"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("memory "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string-literal"}},[n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"4096"')])]),s._v("\n      "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("end")]),s._v("\n      vb"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("vm"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("provision "),n("span",{pre:!0,attrs:{class:"token string-literal"}},[n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"shell"')])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token symbol"}},[s._v("inline")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string-literal heredoc-string"}},[n("span",{pre:!0,attrs:{class:"token delimiter"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<<-")]),n("span",{pre:!0,attrs:{class:"token symbol"}},[s._v("SHELL")])]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('\n        lvextend /dev/ubuntu-vg/ubuntu-lv /dev/sda3\n        resize2fs /dev/ubuntu-vg/ubuntu-lv\n        df -h /\n        # sudo apt-get update -y\n        sudo ufw disable\n        #关闭swap\n        sudo swapoff -a  \n        sudo sed -ri \'s/.*swap.*/#&/\' /etc/fstab\n        # sudo curl -sfL https://rancher-mirror.rancher.cn/k3s/k3s-install.sh  | INSTALL_K3S_MIRROR=cn INSTALL_K3S_EXEC="agent" K3S_TOKEN="k3stoekn123456"  K3S_URL=https://192.168.30.10:6443 sh -\n      ')]),n("span",{pre:!0,attrs:{class:"token delimiter"}},[n("span",{pre:!0,attrs:{class:"token symbol"}},[s._v("SHELL")])])]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("end")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("end")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("end")]),s._v("\n\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br"),n("span",{staticClass:"line-number"},[s._v("29")]),n("br"),n("span",{staticClass:"line-number"},[s._v("30")]),n("br"),n("span",{staticClass:"line-number"},[s._v("31")]),n("br"),n("span",{staticClass:"line-number"},[s._v("32")]),n("br"),n("span",{staticClass:"line-number"},[s._v("33")]),n("br"),n("span",{staticClass:"line-number"},[s._v("34")]),n("br"),n("span",{staticClass:"line-number"},[s._v("35")]),n("br"),n("span",{staticClass:"line-number"},[s._v("36")]),n("br"),n("span",{staticClass:"line-number"},[s._v("37")]),n("br"),n("span",{staticClass:"line-number"},[s._v("38")]),n("br"),n("span",{staticClass:"line-number"},[s._v("39")]),n("br"),n("span",{staticClass:"line-number"},[s._v("40")]),n("br"),n("span",{staticClass:"line-number"},[s._v("41")]),n("br"),n("span",{staticClass:"line-number"},[s._v("42")]),n("br"),n("span",{staticClass:"line-number"},[s._v("43")]),n("br"),n("span",{staticClass:"line-number"},[s._v("44")]),n("br"),n("span",{staticClass:"line-number"},[s._v("45")]),n("br"),n("span",{staticClass:"line-number"},[s._v("46")]),n("br"),n("span",{staticClass:"line-number"},[s._v("47")]),n("br"),n("span",{staticClass:"line-number"},[s._v("48")]),n("br"),n("span",{staticClass:"line-number"},[s._v("49")]),n("br"),n("span",{staticClass:"line-number"},[s._v("50")]),n("br"),n("span",{staticClass:"line-number"},[s._v("51")]),n("br"),n("span",{staticClass:"line-number"},[s._v("52")]),n("br"),n("span",{staticClass:"line-number"},[s._v("53")]),n("br"),n("span",{staticClass:"line-number"},[s._v("54")]),n("br"),n("span",{staticClass:"line-number"},[s._v("55")]),n("br"),n("span",{staticClass:"line-number"},[s._v("56")]),n("br"),n("span",{staticClass:"line-number"},[s._v("57")]),n("br"),n("span",{staticClass:"line-number"},[s._v("58")]),n("br"),n("span",{staticClass:"line-number"},[s._v("59")]),n("br"),n("span",{staticClass:"line-number"},[s._v("60")]),n("br"),n("span",{staticClass:"line-number"},[s._v("61")]),n("br"),n("span",{staticClass:"line-number"},[s._v("62")]),n("br"),n("span",{staticClass:"line-number"},[s._v("63")]),n("br"),n("span",{staticClass:"line-number"},[s._v("64")]),n("br"),n("span",{staticClass:"line-number"},[s._v("65")]),n("br"),n("span",{staticClass:"line-number"},[s._v("66")]),n("br"),n("span",{staticClass:"line-number"},[s._v("67")]),n("br"),n("span",{staticClass:"line-number"},[s._v("68")]),n("br"),n("span",{staticClass:"line-number"},[s._v("69")]),n("br"),n("span",{staticClass:"line-number"},[s._v("70")]),n("br"),n("span",{staticClass:"line-number"},[s._v("71")]),n("br"),n("span",{staticClass:"line-number"},[s._v("72")]),n("br"),n("span",{staticClass:"line-number"},[s._v("73")]),n("br"),n("span",{staticClass:"line-number"},[s._v("74")]),n("br"),n("span",{staticClass:"line-number"},[s._v("75")]),n("br"),n("span",{staticClass:"line-number"},[s._v("76")]),n("br"),n("span",{staticClass:"line-number"},[s._v("77")]),n("br"),n("span",{staticClass:"line-number"},[s._v("78")]),n("br"),n("span",{staticClass:"line-number"},[s._v("79")]),n("br"),n("span",{staticClass:"line-number"},[s._v("80")]),n("br"),n("span",{staticClass:"line-number"},[s._v("81")]),n("br"),n("span",{staticClass:"line-number"},[s._v("82")]),n("br"),n("span",{staticClass:"line-number"},[s._v("83")]),n("br"),n("span",{staticClass:"line-number"},[s._v("84")]),n("br"),n("span",{staticClass:"line-number"},[s._v("85")]),n("br"),n("span",{staticClass:"line-number"},[s._v("86")]),n("br"),n("span",{staticClass:"line-number"},[s._v("87")]),n("br"),n("span",{staticClass:"line-number"},[s._v("88")]),n("br"),n("span",{staticClass:"line-number"},[s._v("89")]),n("br"),n("span",{staticClass:"line-number"},[s._v("90")]),n("br"),n("span",{staticClass:"line-number"},[s._v("91")]),n("br"),n("span",{staticClass:"line-number"},[s._v("92")]),n("br"),n("span",{staticClass:"line-number"},[s._v("93")]),n("br"),n("span",{staticClass:"line-number"},[s._v("94")]),n("br"),n("span",{staticClass:"line-number"},[s._v("95")]),n("br"),n("span",{staticClass:"line-number"},[s._v("96")]),n("br"),n("span",{staticClass:"line-number"},[s._v("97")]),n("br"),n("span",{staticClass:"line-number"},[s._v("98")]),n("br"),n("span",{staticClass:"line-number"},[s._v("99")]),n("br"),n("span",{staticClass:"line-number"},[s._v("100")]),n("br"),n("span",{staticClass:"line-number"},[s._v("101")]),n("br"),n("span",{staticClass:"line-number"},[s._v("102")]),n("br"),n("span",{staticClass:"line-number"},[s._v("103")]),n("br"),n("span",{staticClass:"line-number"},[s._v("104")]),n("br"),n("span",{staticClass:"line-number"},[s._v("105")]),n("br"),n("span",{staticClass:"line-number"},[s._v("106")]),n("br"),n("span",{staticClass:"line-number"},[s._v("107")]),n("br"),n("span",{staticClass:"line-number"},[s._v("108")]),n("br"),n("span",{staticClass:"line-number"},[s._v("109")]),n("br"),n("span",{staticClass:"line-number"},[s._v("110")]),n("br"),n("span",{staticClass:"line-number"},[s._v("111")]),n("br"),n("span",{staticClass:"line-number"},[s._v("112")]),n("br"),n("span",{staticClass:"line-number"},[s._v("113")]),n("br"),n("span",{staticClass:"line-number"},[s._v("114")]),n("br"),n("span",{staticClass:"line-number"},[s._v("115")]),n("br"),n("span",{staticClass:"line-number"},[s._v("116")]),n("br"),n("span",{staticClass:"line-number"},[s._v("117")]),n("br"),n("span",{staticClass:"line-number"},[s._v("118")]),n("br"),n("span",{staticClass:"line-number"},[s._v("119")]),n("br"),n("span",{staticClass:"line-number"},[s._v("120")]),n("br"),n("span",{staticClass:"line-number"},[s._v("121")]),n("br"),n("span",{staticClass:"line-number"},[s._v("122")]),n("br")])]),n("h2",{attrs:{id:"配置命令自动补全"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#配置命令自动补全"}},[s._v("#")]),s._v(" 配置命令自动补全")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[s._v("\n安装基本的 "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("bash")]),s._v(" 自动完成\n\nyum "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" bash-completion\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# apt-get install  bash-completion")]),s._v("\n添加自动完成脚本\n\nkubectl completion "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("bash")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("tee")]),s._v(" /etc/bash_completion.d/kubectl "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" /dev/null\n设置别名\n\n"),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'alias k=kubectl'")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">>")]),s._v("~/.bashrc\n给别名也添加自动完成提示\n\n"),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'complete -o default -F __start_kubectl k'")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">>")]),s._v("~/.bashrc\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("zsh")]),s._v(" 自动完成\n\n"),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'source <(kubectl completion zsh)'")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">>")]),s._v("~/.zshrc\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br")])]),n("h2",{attrs:{id:"安装dashboard"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#安装dashboard"}},[s._v("#")]),s._v(" 安装dashboard")]),s._v(" "),n("blockquote",[n("p",[n("a",{attrs:{href:"https://docs.rancher.cn/docs/k3s/installation/kube-dashboard/_index/",target:"_blank",rel:"noopener noreferrer"}},[s._v("Kubernetes 仪表盘 | Rancher文档"),n("OutboundLink")],1)])]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[s._v("root@k3s-master-1:/home/vagrant"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# kubectl apply -f https://raw.githubusercontent.com/kubernetes/dashboard/v2.7.0/aio/deploy/recommended.yaml")]),s._v("\nnamespace/kubernetes-dashboard created\nserviceaccount/kubernetes-dashboard created\nservice/kubernetes-dashboard created\nsecret/kubernetes-dashboard-certs created\nsecret/kubernetes-dashboard-csrf created\nsecret/kubernetes-dashboard-key-holder created\nconfigmap/kubernetes-dashboard-settings created\nrole.rbac.authorization.k8s.io/kubernetes-dashboard created\nclusterrole.rbac.authorization.k8s.io/kubernetes-dashboard created\nrolebinding.rbac.authorization.k8s.io/kubernetes-dashboard created\nclusterrolebinding.rbac.authorization.k8s.io/kubernetes-dashboard created\ndeployment.apps/kubernetes-dashboard created\nservice/dashboard-metrics-scraper created\ndeployment.apps/dashboard-metrics-scraper created\nroot@k3s-master-1:/home/vagrant"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# kubectl get pods -A -o wide")]),s._v("\nNAMESPACE              NAME                                         READY   STATUS      RESTARTS   AGE   IP          NODE           NOMINATED NODE   READINESS GATES\nkube-system            coredns-77ccd57875-956rz                     "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("/1     Running     "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("          51m   "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("10.42")]),s._v(".0.4   k3s-master-1   "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("none"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("           "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("none"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" \nkube-system            helm-install-traefik-crd-n92vd               "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("/1     Completed   "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("          51m   "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("10.42")]),s._v(".0.3   k3s-master-1   "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("none"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("           "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("none"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" \nkube-system            helm-install-traefik-ndb7s                   "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("/1     Completed   "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("          51m   "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("10.42")]),s._v(".0.5   k3s-master-1   "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("none"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("           "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("none"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" \nkube-system            local-path-provisioner-957fdf8bc-z4pwr       "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("/1     Running     "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("          51m   "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("10.42")]),s._v(".0.6   k3s-master-1   "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("none"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("           "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("none"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" \nkube-system            metrics-server-648b5df564-7452s              "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("/1     Running     "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("          51m   "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("10.42")]),s._v(".0.2   k3s-master-1   "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("none"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("           "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("none"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" \nkube-system            svclb-traefik-71cee43e-pbt2m                 "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("/2     Running     "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("          39m   "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("10.42")]),s._v(".1.2   k3s-worker-1   "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("none"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("           "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("none"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" \nkube-system            svclb-traefik-71cee43e-sgv5b                 "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("/2     Running     "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("          50m   "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("10.42")]),s._v(".0.7   k3s-master-1   "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("none"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("           "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("none"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" \nkube-system            traefik-768bdcdcdd-hvtg2                     "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("/1     Running     "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("          50m   "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("10.42")]),s._v(".0.8   k3s-master-1   "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("none"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("           "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("none"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" \nkubernetes-dashboard   dashboard-metrics-scraper-5cb4f4bb9c-9wrnw   "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("/1     Running     "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("          58s   "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("10.42")]),s._v(".1.4   k3s-worker-1   "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("none"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("           "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("none"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" \nkubernetes-dashboard   kubernetes-dashboard-6967859bff-crs7h        "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("/1     Running     "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("          58s   "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("10.42")]),s._v(".1.3   k3s-worker-1   "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("none"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("           "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("none"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" \nroot@k3s-master-1:/home/vagrant"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# kubectl edit svc kubernetes-dashboard -n kubernetes-dashboard")]),s._v("\nservice/kubernetes-dashboard edited\nroot@k3s-master-1:/home/vagrant"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# kubectl get svc -A")]),s._v("\nNAMESPACE              NAME                        TYPE           CLUSTER-IP      EXTERNAL-IP                       PORT"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("S"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("                      AGE\ndefault                kubernetes                  ClusterIP      "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("10.43")]),s._v(".0.1       "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("none"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("                            "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("443")]),s._v("/TCP                      53m  \nkube-system            kube-dns                    ClusterIP      "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("10.43")]),s._v(".0.10      "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("none"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("                            "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("53")]),s._v("/UDP,53/TCP,9153/TCP       53m  \nkube-system            metrics-server              ClusterIP      "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("10.43")]),s._v(".114.35    "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("none"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("                            "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("443")]),s._v("/TCP                      53m\nkube-system            traefik                     LoadBalancer   "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("10.43")]),s._v(".164.114   "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".234.169,192.168.234.170   "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("80")]),s._v(":31154/TCP,443:32454/TCP   52m  \nkubernetes-dashboard   dashboard-metrics-scraper   ClusterIP      "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("10.43")]),s._v(".4.122     "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("none"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("                            "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("8000")]),s._v("/TCP                     3m31s  \nkubernetes-dashboard   kubernetes-dashboard        NodePort       "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("10.43")]),s._v(".230.149   "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("none"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("                            "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("443")]),s._v(":30473/TCP                3m31s  \n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#创建访问账号，准备一个yaml文件； vim dash.yaml")]),s._v("\nroot@k3s-master-1:/home/vagrant"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# cat dash.yaml ")]),s._v("\napiVersion: v1\nkind: ServiceAccount\nmetadata:\n  name: admin-user\n  namespace: kubernetes-dashboard\n---\napiVersion: rbac.authorization.k8s.io/v1\nkind: ClusterRoleBinding\nmetadata:\n  name: admin-user\nroleRef:\n  apiGroup: rbac.authorization.k8s.io\n  kind: ClusterRole\n  name: cluster-admin\nsubjects:\n- kind: ServiceAccount\n  name: admin-user\n  namespace: kubernetes-dashboard\nroot@k3s-master-1:/home/vagrant"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#  kubectl apply -f dash.yaml")]),s._v("\nserviceaccount/admin-user created\nclusterrolebinding.rbac.authorization.k8s.io/admin-user created\nroot@k3s-master-1:/home/vagrant"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# kubectl -n kubernetes-dashboard create token admin-user --duration=2400h")]),s._v("\neyJhbGciOiJSUzI1NiIsImtpZCI6Ik9aenFvVENlU3U5ZjMzMmNObnpqY0QxVEF2QmlGcjNOcml5eGZEREp3QVEifQ.eyJhdWQiOlsiaHR0cHM6Ly9rdWJlcm5ldGVzLmRlZmF1bHQuc3ZjLmNsdXN0ZXIubG9jYWwiLCJrM3MiXSwiZXhwIjoxNzA5ODAyNzQ4LCJpYXQiOjE3MDExNjI3NDgsImlzcyI6Imh0dHBzOi8va3ViZXJuZXRlcy5kZWZhdWx0LnN2Yy5jbHVzdGVyLmxvY2FsIiwia3ViZXJuZXRlcy5pbyI6eyJuYW1lc3BhY2UiOiJrdWJlcm5ldGVzLWRhc2hib2FyZCIsInNlcnZpY2VhY2NvdW50Ijp7Im5hbWUiOiJhZG1pbi11c2VyIiwidWlkIjoiZDY4N2JmOGUtYTZjOS00OTk1LThmNjgtMjA3Nzg3ZjQxYTE5In19LCJuYmYiOjE3MDExNjI3NDgsInN1YiI6InN5c3RlbTpzZXJ2aWNlYWNjb3VudDprdWJlcm5ldGVzLWRhc2hib2FyZDphZG1pbi11c2VyIn0.ZiaP56Z3Qix95cBOQKu43jFKwA_9nOeygUtVPZjLiGIf_VNMJpA9drG6K9kBHDFVBCM42PPIez7kYxvVwczftdzhcRTplmURyRCJw4wRLPtRB2Xt3aPsfw1rbtBlYx8EfawmNQ1thxbg6tRfEBv6Gv2dKZA6Nfy7s7c6ktH5KM1gXKO_Hkv_wiC0c2hHONEK42l3qs-z6nfsxDMfvSsgZ3Pt0v-pb8HoTASunDO3IGJrbsAoVSNE9EAKpXGUsQrKVX7kU-3P9Gu30SPHhctHIvrMn4shNWERfwryQwhlX0hg2B0T0Tcf67cPLFZNbyEdNcSvn0ItWbFcMdZms9q1yQ\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br"),n("span",{staticClass:"line-number"},[s._v("29")]),n("br"),n("span",{staticClass:"line-number"},[s._v("30")]),n("br"),n("span",{staticClass:"line-number"},[s._v("31")]),n("br"),n("span",{staticClass:"line-number"},[s._v("32")]),n("br"),n("span",{staticClass:"line-number"},[s._v("33")]),n("br"),n("span",{staticClass:"line-number"},[s._v("34")]),n("br"),n("span",{staticClass:"line-number"},[s._v("35")]),n("br"),n("span",{staticClass:"line-number"},[s._v("36")]),n("br"),n("span",{staticClass:"line-number"},[s._v("37")]),n("br"),n("span",{staticClass:"line-number"},[s._v("38")]),n("br"),n("span",{staticClass:"line-number"},[s._v("39")]),n("br"),n("span",{staticClass:"line-number"},[s._v("40")]),n("br"),n("span",{staticClass:"line-number"},[s._v("41")]),n("br"),n("span",{staticClass:"line-number"},[s._v("42")]),n("br"),n("span",{staticClass:"line-number"},[s._v("43")]),n("br"),n("span",{staticClass:"line-number"},[s._v("44")]),n("br"),n("span",{staticClass:"line-number"},[s._v("45")]),n("br"),n("span",{staticClass:"line-number"},[s._v("46")]),n("br"),n("span",{staticClass:"line-number"},[s._v("47")]),n("br"),n("span",{staticClass:"line-number"},[s._v("48")]),n("br"),n("span",{staticClass:"line-number"},[s._v("49")]),n("br"),n("span",{staticClass:"line-number"},[s._v("50")]),n("br"),n("span",{staticClass:"line-number"},[s._v("51")]),n("br"),n("span",{staticClass:"line-number"},[s._v("52")]),n("br"),n("span",{staticClass:"line-number"},[s._v("53")]),n("br"),n("span",{staticClass:"line-number"},[s._v("54")]),n("br"),n("span",{staticClass:"line-number"},[s._v("55")]),n("br"),n("span",{staticClass:"line-number"},[s._v("56")]),n("br"),n("span",{staticClass:"line-number"},[s._v("57")]),n("br"),n("span",{staticClass:"line-number"},[s._v("58")]),n("br"),n("span",{staticClass:"line-number"},[s._v("59")]),n("br"),n("span",{staticClass:"line-number"},[s._v("60")]),n("br"),n("span",{staticClass:"line-number"},[s._v("61")]),n("br"),n("span",{staticClass:"line-number"},[s._v("62")]),n("br")])]),n("p",[s._v("要访问仪表盘，你必须创建一个安全通道到你的 K3s 集群。")]),s._v(" "),n("p",[n("code",[s._v("sudo k3s kubectl proxy")])]),s._v(" "),n("p",[s._v("现在可以通过以下网址访问仪表盘：")]),s._v(" "),n("ul",[n("li",[n("code",[s._v("http://localhost:8001/api/v1/namespaces/kubernetes-dashboard/services/https:kubernetes-dashboard:/proxy/")])]),s._v(" "),n("li",[s._v("使用 "),n("code",[s._v("admin-user")]),s._v(" Bearer Token "),n("code",[s._v("Sign In")])])]),s._v(" "),n("p",[s._v("绑定0.0.0.0，可以通过外部访问\n"),n("code",[s._v("kubectl port-forward -n kubernetes-dashboard service/kubernetes-dashboard 10443:443 --address 0.0.0.0")])]),s._v(" "),n("h2",{attrs:{id:"kubectl-proxy"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#kubectl-proxy"}},[s._v("#")]),s._v(" kubectl proxy")]),s._v(" "),n("div",{staticClass:"language-shell line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-shell"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 创建一个运行 MongoDB 的 Deployment：")]),s._v("\nroot@k3s-master-1:/home/vagrant"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# kubectl apply -f https://k8s.io/examples/application/mongodb/mongo-deployment.yaml")]),s._v("\ndeplyment.apps/mongo created\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看 Pod 状态")]),s._v("\nroot@k3s-master-1:/home/vagrant"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# kubectl get pods ")]),s._v("\nNAME                    READY   STATUS             RESTARTS   AGE\nmongo-7d96cb4cf-ql4ls   "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("/1     ImagePullBackOff   "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("          21s\nroot@k3s-master-1:/home/vagrant"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# kubectl get pods ")]),s._v("\nNAME                    READY   STATUS    RESTARTS   AGE\nmongo-7d96cb4cf-ql4ls   "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("/1     Running   "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("          4m4s\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看 Deployment 状态")]),s._v("\nroot@k3s-master-1:/home/vagrant"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# kubectl get deployment  ")]),s._v("\nNAME    READY   UP-TO-DATE   AVAILABLE   AGE\nmongo   "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("/1     "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("            "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("           3m59s\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 该 Deployment 自动管理一个 ReplicaSet。查看该 ReplicaSet 的状态")]),s._v("\nroot@k3s-master-1:/home/vagrant"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# kubectl get replicaset")]),s._v("\nNAME              DESIRED   CURRENT   READY   AGE\nmongo-7d96cb4cf   "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("         "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("         "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("       4m13\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br")])]),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 创建一个在网络上公开的 MongoDB 服务")]),s._v("\nroot@k3s-master-1:/home/vagrant"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# kubectl apply -f https://k8s.io/examples/application/mongodb/mongo-service.yaml")]),s._v("\nservice/mongo created\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 检查所创建的 Service")]),s._v("\nroot@k3s-master-1:/home/vagrant"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#  kubectl get service mongo")]),s._v("\nNAME    TYPE        CLUSTER-IP   EXTERNAL-IP   PORT"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("S"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("     AGE\nmongo   ClusterIP   "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("10.43")]),s._v(".9.69   "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("none"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("        "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("27017")]),s._v("/TCP   11s\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 验证 MongoDB 服务是否运行在 Pod 中并且在监听 27017 端口")]),s._v("\nroot@k3s-master-1:/home/vagrant"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# kubectl get pod mongo-7d96cb4cf-ql4ls --template='{{(index (index .spec.containers 0).ports 0).containerPort}}{{\"\\n\"}}'")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("27017")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br")])]),n("h2",{attrs:{id:"转发一个本地端口到-pod-端口"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#转发一个本地端口到-pod-端口"}},[s._v("#")]),s._v(" 转发一个本地端口到 Pod 端口")]),s._v(" "),n("p",[n("code",[s._v("kubectl port-forward")]),s._v(" 允许使用资源名称 （例如 Pod 名称）来选择匹配的 Pod 来进行端口转发")]),s._v(" "),n("div",{staticClass:"language-shell line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-shell"}},[n("code",[s._v("kubectl port-forward mongo-7d96cb4cf-ql4ls "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("28015")]),s._v(":27017\nkubectl port-forward pods/mongo-7d96cb4cf-ql4ls "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("28015")]),s._v(":27017\nkubectl port-forward deployment/mongo "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("28015")]),s._v(":27017\nkubectl port-forward replicaset/mongo-7d96cb4cf "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("28015")]),s._v(":27017\nkubectl port-forward service/mongo "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("28015")]),s._v(":27017\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br")])]),n("p",[s._v("以上所有命令效果相同。输出类似于：")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[s._v("root@k3s-master-1:/home/vagrantkubectl port-forward replicaset/mongo-7d96cb4cf "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("28015")]),s._v(":2701717\nForwarding from "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1:28015 -"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("27017")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br")])]),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[s._v("root@k3s-master-1:/home/vagrant"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# kubectl port-forward deployment/mongo :27017  # 让 *kubectl* 来选择本地端口")]),s._v("\nForwarding from "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1:33627 -"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("27017")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br")])])])}),[],!1,null,null,null);a.default=e.exports}}]);