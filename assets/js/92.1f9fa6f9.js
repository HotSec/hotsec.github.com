(window.webpackJsonp=window.webpackJsonp||[]).push([[92],{499:function(s,n,a){"use strict";a.r(n);var t=a(56),e=Object(t.a)({},(function(){var s=this,n=s.$createElement,a=s._self._c||n;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h1",{attrs:{id:"kubernetes"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#kubernetes"}},[s._v("#")]),s._v(" Kubernetes")]),s._v(" "),a("h2",{attrs:{id:"介绍"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#介绍"}},[s._v("#")]),s._v(" 介绍")]),s._v(" "),a("p",[s._v("Kubernetes 也称为 K8s，是用于自动部署、扩缩和管理容器化应用程序的开源系统。")]),s._v(" "),a("p",[s._v("尽管Kubernetes在Linux上运行，但它与平台无关，可以在裸机，虚拟机，云实例或OpenStack上运行。最新版本的Kubernetes已经支持在Windows上运行。")]),s._v(" "),a("ul",[a("li",[s._v("服务发现和负载均衡")]),s._v(" "),a("li",[s._v("存储编排")]),s._v(" "),a("li",[s._v("自动部署和回滚")]),s._v(" "),a("li",[s._v("自动完成装箱计算")]),s._v(" "),a("li",[s._v("自动修复")]),s._v(" "),a("li",[s._v("密钥与配置管理")])]),s._v(" "),a("h2",{attrs:{id:"组件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#组件"}},[s._v("#")]),s._v(" 组件")]),s._v(" "),a("ul",[a("li",[a("p",[s._v("控制面")]),s._v(" "),a("ul",[a("li",[s._v("kube-apiserver")]),s._v(" "),a("li",[s._v("kube-scheduler")]),s._v(" "),a("li",[s._v("kube-controller-manager")]),s._v(" "),a("li",[s._v("etcd")]),s._v(" "),a("li",[s._v("Dashboard(可选)")])])]),s._v(" "),a("li",[a("p",[s._v("数据面")]),s._v(" "),a("ul",[a("li",[s._v("kubelet：主要的节点代理。它监视API服务器以查找已分配给其节点的Pod。 Kubelet执行任务并维护向主节点报告pod状态的反向通道。")]),s._v(" "),a("li",[s._v("容器运行时")]),s._v(" "),a("li",[s._v("kUbe-proxy 负责维护主机上的网络规则并执行连接转发。它还负责服务中所有Pod的负载平衡。")])])]),s._v(" "),a("li",[a("p",[s._v("附加组件")]),s._v(" "),a("ul",[a("li",[s._v("DNS服务器 CoreDNS")]),s._v(" "),a("li",[s._v("网络插件")]),s._v(" "),a("li",[s._v("日志记录代理")])])]),s._v(" "),a("li",[a("p",[s._v("CLI")]),s._v(" "),a("ul",[a("li",[s._v("kubeadm：用来初始化集群的指令。")]),s._v(" "),a("li",[s._v("kubectl：用来与集群通信的命令行工具。")])])])]),s._v(" "),a("h3",{attrs:{id:"在部署应用程序时-将发生以下操作"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#在部署应用程序时-将发生以下操作"}},[s._v("#")]),s._v(" 在部署应用程序时，将发生以下操作：")]),s._v(" "),a("ul",[a("li",[s._v("你将应用程序清单提交给Kubernetes API。 API Server将清单中定义的对象写入etcd。")]),s._v(" "),a("li",[s._v("控制器会注意到新创建的对象，并创建几个新对象。")]),s._v(" "),a("li",[s._v("调度程序将Pod分配给每个工作节点。")]),s._v(" "),a("li",[s._v("Kubelet注意到已分配给自己的Pod。它通过Container Runtime运行应用程序实例。")]),s._v(" "),a("li",[s._v("Kube-proxy会注意到，应用程序实例已准备就绪，可以接受来自客户端的连接并为其配置负载均衡器。")]),s._v(" "),a("li",[s._v("Kubelet和控制器监视系统并保持应用程序运行。")])]),s._v(" "),a("h2",{attrs:{id:"安装"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#安装"}},[s._v("#")]),s._v(" 安装")]),s._v(" "),a("ul",[a("li",[a("p",[s._v("minikube")])]),s._v(" "),a("li",[a("p",[s._v("kubeadm")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('# -*- mode: ruby -*-\n# vi: set ft=ruby :\n\nVagrant.configure("2") do |config|\n  \n  config.vm.box = "generic/ubuntu2204"\n  config.vm.hostname = "k8s-master"\n  config.vm.disk :disk, name: "main", size: "300GB"\n  config.vm.network "public_network"\n\n\n  # config.vm.synced_folder "../data", "/vagrant_data"\n  # config.vm.synced_folder ".", "/vagrant", disabled: true\n\n  config.vm.provider "vmware_desktop" do |vb|\n    vb.gui = true\n    vb.cpus = 8\n    vb.memory = "16384"\n  end\n  config.vm.provision "shell", inline: <<-SHELL\n    lvextend /dev/ubuntu-vg/ubuntu-lv /dev/sda3\n    resize2fs /dev/ubuntu-vg/ubuntu-lv\n    df -h /\n    sudo apt-get update -y\n    sudo ufw disable\n    # # 将 SELinux 设置为 permissive 模式（相当于将其禁用）\n    # sudo setenforce 0\n    # sudo sed -i \'s/^SELINUX=enforcing$/SELINUX=permissive/\' /etc/selinux/config\n\n    #关闭swap\n    sudo swapoff -a  \n    sudo sed -ri \'s/.*swap.*/#&/\' /etc/fstab\n\n    #允许 iptables 检查桥接流量\n    sudo cat <<EOF | sudo tee /etc/modules-load.d/k8s.conf\nbr_netfilter\nEOF\n    sudo modprobe overlay\n    sudo modprobe br_netfilter\n    # 设置所需的 sysctl 参数，参数在重新启动后保持不变\n    sudo cat <<EOF | sudo tee /etc/sysctl.d/k8s.conf\nnet.bridge.bridge-nf-call-iptables  = 1\nnet.bridge.bridge-nf-call-ip6tables = 1\nnet.ipv4.ip_forward                 = 1\nEOF\n    # 应用 sysctl 参数而不重新启动\n    sudo sysctl --system\n    # sudo mkdir -m 755 /etc/apt/keyrings\n    # 安装containerd\n    sudo apt-get install ca-certificates curl gnupg -y \n    sudo install -m 0755 -d /etc/apt/keyring\n    sudo curl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo gpg --dearmor -o /etc/apt/keyrings/docker.gpg\n    sudo chmod a+r /etc/apt/keyrings/docker.gpg\n    echo \\\n    "deb [arch="$(dpkg --print-architecture)" signed-by=/etc/apt/keyrings/docker.gpg] https://download.docker.com/linux/ubuntu \\\n    "$(. /etc/os-release && echo "$VERSION_CODENAME")" stable" | \\\n    sudo tee /etc/apt/sources.list.d/docker.list\n    sudo apt-get update -y\n    sudo apt-get install containerd.io -y \n\n    # wget https://github.com/containernetworking/plugins/releases/download/v1.3.0/cni-plugins-linux-amd64-v1.3.0.tgz\n    # sudo  mkdir -p /opt/cni/bin\n    # sudo tar Cxzvf /opt/cni/bin cni-plugins-linux-amd64-v1.3.0.tgz\n    # containerd config default > /etc/containerd/config.toml\n\n    #   [plugins."io.containerd.grpc.v1.cri".containerd.runtimes.runc]\n    # ...\n    # [plugins."io.containerd.grpc.v1.cri".containerd.runtimes.runc.options]\n    #   SystemdCgroup = true\n    # sudo systemctl restart containerd\n\n    # sudo apt-get install -y apt-transport-https ca-certificates curl gpg\n    # sudo curl -fsSL https://pkgs.k8s.io/core:/stable:/v1.28/deb/Release.key | sudo gpg --dearmor -o /etc/apt/keyrings/kubernetes-apt-keyring.gpg\n    # sudo chmod a+r /etc/apt/keyrings/docker.gpg\n    # sudo echo \'deb [signed-by=/etc/apt/keyrings/kubernetes-apt-keyring.gpg] https://pkgs.k8s.io/core:/stable:/v1.28/deb/ /\' | sudo tee /etc/apt/sources.list.d/kubernetes.list\n    # sudo apt-get update -y\n    # sudo apt-get install -y kubelet kubeadm kubectl\n    # sudo apt-mark hold kubelet kubeadm kubectl\n\n    # kubeadm config images pull  --image-repository registry.aliyuncs.com/google_containers\n    # ctr -n k8s.io i tag registry.aliyuncs.com/google_containers/pause:3.9 registry.k8s.io/pause:3.6 \n    # sudo kubeadm init  --apiserver-advertise-address=192.168.234.156  --pod-network-cidr=192.168.0.0/16 --image-repository registry.aliyuncs.com/google_containers \n\n    # export KUBECONFIG=/etc/kubernetes/admin.conf\n\n\n    # Your Kubernetes control-plane has initialized successfully!\n\n    # To start using your cluster, you need to run the following as a regular user:\n\n    #   mkdir -p $HOME/.kube\n    #   sudo cp -i /etc/kubernetes/admin.conf $HOME/.kube/config\n    #   sudo chown $(id -u):$(id -g) $HOME/.kube/config\n\n    # Alternatively, if you are the root user, you can run:\n\n    #   export KUBECONFIG=/etc/kubernetes/admin.conf\n\n    # You should now deploy a pod network to the cluster.\n    # Run "kubectl apply -f [podnetwork].yaml" with one of the options listed at:\n    #   https://kubernetes.io/docs/concepts/cluster-administration/addons/\n\n    # Then you can join any number of worker nodes by running the following on each as root:\n\n    # kubeadm join 192.168.234.156:6443 --token 7hmrqw.ypwg6m9z5j4v8brq \\\n    #         --discovery-token-ca-cert-hash sha256:5ccd48a83cfe4a810327e80f1cb9cc68f8a05095850acf3d23fae90d618b7d98\n\n\n    # sudo kubeadm init --pod-network-cidr=192.168.0.0/16\n    # sudo kubeadm init \\\n    # --apiserver-advertise-address=192.168.234.155 \\\n    # --control-plane-endpoint=cluster-endpoint \\\n    # --service-cidr=10.96.0.0/16 \\\n    # --pod-network-cidr=192.168.0.0/16\n  \n    kubectl create -f https://raw.githubusercontent.com/projectcalico/calico/v3.26.1/manifests/tigera-operator.yaml\n\n    kubectl taint nodes --all node-role.kubernetes.io/control-plane-\n  \n  SHELL\nend\n\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br"),a("span",{staticClass:"line-number"},[s._v("29")]),a("br"),a("span",{staticClass:"line-number"},[s._v("30")]),a("br"),a("span",{staticClass:"line-number"},[s._v("31")]),a("br"),a("span",{staticClass:"line-number"},[s._v("32")]),a("br"),a("span",{staticClass:"line-number"},[s._v("33")]),a("br"),a("span",{staticClass:"line-number"},[s._v("34")]),a("br"),a("span",{staticClass:"line-number"},[s._v("35")]),a("br"),a("span",{staticClass:"line-number"},[s._v("36")]),a("br"),a("span",{staticClass:"line-number"},[s._v("37")]),a("br"),a("span",{staticClass:"line-number"},[s._v("38")]),a("br"),a("span",{staticClass:"line-number"},[s._v("39")]),a("br"),a("span",{staticClass:"line-number"},[s._v("40")]),a("br"),a("span",{staticClass:"line-number"},[s._v("41")]),a("br"),a("span",{staticClass:"line-number"},[s._v("42")]),a("br"),a("span",{staticClass:"line-number"},[s._v("43")]),a("br"),a("span",{staticClass:"line-number"},[s._v("44")]),a("br"),a("span",{staticClass:"line-number"},[s._v("45")]),a("br"),a("span",{staticClass:"line-number"},[s._v("46")]),a("br"),a("span",{staticClass:"line-number"},[s._v("47")]),a("br"),a("span",{staticClass:"line-number"},[s._v("48")]),a("br"),a("span",{staticClass:"line-number"},[s._v("49")]),a("br"),a("span",{staticClass:"line-number"},[s._v("50")]),a("br"),a("span",{staticClass:"line-number"},[s._v("51")]),a("br"),a("span",{staticClass:"line-number"},[s._v("52")]),a("br"),a("span",{staticClass:"line-number"},[s._v("53")]),a("br"),a("span",{staticClass:"line-number"},[s._v("54")]),a("br"),a("span",{staticClass:"line-number"},[s._v("55")]),a("br"),a("span",{staticClass:"line-number"},[s._v("56")]),a("br"),a("span",{staticClass:"line-number"},[s._v("57")]),a("br"),a("span",{staticClass:"line-number"},[s._v("58")]),a("br"),a("span",{staticClass:"line-number"},[s._v("59")]),a("br"),a("span",{staticClass:"line-number"},[s._v("60")]),a("br"),a("span",{staticClass:"line-number"},[s._v("61")]),a("br"),a("span",{staticClass:"line-number"},[s._v("62")]),a("br"),a("span",{staticClass:"line-number"},[s._v("63")]),a("br"),a("span",{staticClass:"line-number"},[s._v("64")]),a("br"),a("span",{staticClass:"line-number"},[s._v("65")]),a("br"),a("span",{staticClass:"line-number"},[s._v("66")]),a("br"),a("span",{staticClass:"line-number"},[s._v("67")]),a("br"),a("span",{staticClass:"line-number"},[s._v("68")]),a("br"),a("span",{staticClass:"line-number"},[s._v("69")]),a("br"),a("span",{staticClass:"line-number"},[s._v("70")]),a("br"),a("span",{staticClass:"line-number"},[s._v("71")]),a("br"),a("span",{staticClass:"line-number"},[s._v("72")]),a("br"),a("span",{staticClass:"line-number"},[s._v("73")]),a("br"),a("span",{staticClass:"line-number"},[s._v("74")]),a("br"),a("span",{staticClass:"line-number"},[s._v("75")]),a("br"),a("span",{staticClass:"line-number"},[s._v("76")]),a("br"),a("span",{staticClass:"line-number"},[s._v("77")]),a("br"),a("span",{staticClass:"line-number"},[s._v("78")]),a("br"),a("span",{staticClass:"line-number"},[s._v("79")]),a("br"),a("span",{staticClass:"line-number"},[s._v("80")]),a("br"),a("span",{staticClass:"line-number"},[s._v("81")]),a("br"),a("span",{staticClass:"line-number"},[s._v("82")]),a("br"),a("span",{staticClass:"line-number"},[s._v("83")]),a("br"),a("span",{staticClass:"line-number"},[s._v("84")]),a("br"),a("span",{staticClass:"line-number"},[s._v("85")]),a("br"),a("span",{staticClass:"line-number"},[s._v("86")]),a("br"),a("span",{staticClass:"line-number"},[s._v("87")]),a("br"),a("span",{staticClass:"line-number"},[s._v("88")]),a("br"),a("span",{staticClass:"line-number"},[s._v("89")]),a("br"),a("span",{staticClass:"line-number"},[s._v("90")]),a("br"),a("span",{staticClass:"line-number"},[s._v("91")]),a("br"),a("span",{staticClass:"line-number"},[s._v("92")]),a("br"),a("span",{staticClass:"line-number"},[s._v("93")]),a("br"),a("span",{staticClass:"line-number"},[s._v("94")]),a("br"),a("span",{staticClass:"line-number"},[s._v("95")]),a("br"),a("span",{staticClass:"line-number"},[s._v("96")]),a("br"),a("span",{staticClass:"line-number"},[s._v("97")]),a("br"),a("span",{staticClass:"line-number"},[s._v("98")]),a("br"),a("span",{staticClass:"line-number"},[s._v("99")]),a("br"),a("span",{staticClass:"line-number"},[s._v("100")]),a("br"),a("span",{staticClass:"line-number"},[s._v("101")]),a("br"),a("span",{staticClass:"line-number"},[s._v("102")]),a("br"),a("span",{staticClass:"line-number"},[s._v("103")]),a("br"),a("span",{staticClass:"line-number"},[s._v("104")]),a("br"),a("span",{staticClass:"line-number"},[s._v("105")]),a("br"),a("span",{staticClass:"line-number"},[s._v("106")]),a("br"),a("span",{staticClass:"line-number"},[s._v("107")]),a("br"),a("span",{staticClass:"line-number"},[s._v("108")]),a("br"),a("span",{staticClass:"line-number"},[s._v("109")]),a("br"),a("span",{staticClass:"line-number"},[s._v("110")]),a("br"),a("span",{staticClass:"line-number"},[s._v("111")]),a("br"),a("span",{staticClass:"line-number"},[s._v("112")]),a("br"),a("span",{staticClass:"line-number"},[s._v("113")]),a("br"),a("span",{staticClass:"line-number"},[s._v("114")]),a("br"),a("span",{staticClass:"line-number"},[s._v("115")]),a("br"),a("span",{staticClass:"line-number"},[s._v("116")]),a("br"),a("span",{staticClass:"line-number"},[s._v("117")]),a("br"),a("span",{staticClass:"line-number"},[s._v("118")]),a("br"),a("span",{staticClass:"line-number"},[s._v("119")]),a("br"),a("span",{staticClass:"line-number"},[s._v("120")]),a("br"),a("span",{staticClass:"line-number"},[s._v("121")]),a("br"),a("span",{staticClass:"line-number"},[s._v("122")]),a("br")])])]),s._v(" "),a("li",[a("p",[s._v("kubekey")])])]),s._v(" "),a("h2",{attrs:{id:"命令参考"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#命令参考"}},[s._v("#")]),s._v(" 命令参考")]),s._v(" "),a("p",[s._v("您可以参考以下 kubectl 命令。"),a("a",{attrs:{href:"https://kubernetes.io/zh/docs/reference/kubectl/overview/",target:"_blank",rel:"noopener noreferrer"}},[s._v("了解更多"),a("OutboundLink")],1),s._v(" "),a("a",{attrs:{href:"https://kubernetes.io/zh-cn/docs/reference/kubectl/kubectl/",target:"_blank",rel:"noopener noreferrer"}},[s._v("kubectl | Kubernetes"),a("OutboundLink")],1)]),s._v(" "),a("h3",{attrs:{id:"自定义输出"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#自定义输出"}},[s._v("#")]),s._v(" 自定义输出")]),s._v(" "),a("ul",[a("li",[a("p",[s._v("查看容器组的更多信息")]),s._v(" "),a("ul",[a("li",[a("code",[s._v("kubectl get pod <容器组名称> -o wide")])])])]),s._v(" "),a("li",[a("p",[s._v("查看 YAML 格式的容器组详情")]),s._v(" "),a("ul",[a("li",[a("code",[s._v("kubectl get pod <容器组名称> -o yaml")])])])])]),s._v(" "),a("h3",{attrs:{id:"执行操作"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#执行操作"}},[s._v("#")]),s._v(" 执行操作")]),s._v(" "),a("h4",{attrs:{id:"创建资源"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#创建资源"}},[s._v("#")]),s._v(" 创建资源")]),s._v(" "),a("ul",[a("li",[a("p",[s._v("使用 YAML 配置文件创建服务")]),s._v(" "),a("ul",[a("li",[a("code",[s._v("kubectl create -f my-service.yaml")])])])]),s._v(" "),a("li",[a("p",[s._v("使用目录下的所有 YAML、YML 和 JSON 文件创建资源")]),s._v(" "),a("ul",[a("li",[a("code",[s._v("kubectl create -f <目录>")])])])])]),s._v(" "),a("h4",{attrs:{id:"查看资源"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#查看资源"}},[s._v("#")]),s._v(" 查看资源")]),s._v(" "),a("ul",[a("li",[a("p",[s._v("查看所有容器组")]),s._v(" "),a("ul",[a("li",[a("code",[s._v("kubectl get pods")])])])]),s._v(" "),a("li",[a("p",[s._v("查看所有服务")]),s._v(" "),a("ul",[a("li",[a("code",[s._v("kubectl get services")])])])])]),s._v(" "),a("h4",{attrs:{id:"查看资源详情"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#查看资源详情"}},[s._v("#")]),s._v(" 查看资源详情")]),s._v(" "),a("ul",[a("li",[a("p",[s._v("查看节点详情")]),s._v(" "),a("ul",[a("li",[a("code",[s._v("kubectl describe nodes <节点名称>")])])])]),s._v(" "),a("li",[a("p",[s._v("查看容器组详情")]),s._v(" "),a("ul",[a("li",[a("code",[s._v("kubectl describe pods <容器组名称>")])])])])]),s._v(" "),a("h3",{attrs:{id:"kubectl-h"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#kubectl-h"}},[s._v("#")]),s._v(" kubectl  -h")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" kubectl  -h\nkubectl controls the Kubernetes cluster manager.\n\n Find "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("more")]),s._v(" information at: https://kubernetes.io/docs/reference/kubectl/overview/\n\nBasic Commands "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("Beginner"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(":\n  create        Create a resource from a "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("file")]),s._v(" or from stdin.\n  expose        使用 replication controller, service, deployment 或者 pod 并暴露它作为一个 新的 Kubernetes\nService\n  run           在集群中运行一个指定的镜像\n  "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("set")]),s._v("           为 objects 设置一个指定的特征\n\nBasic Commands "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("Intermediate"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(":\n  explain       查看资源的文档\n  get           显示一个或更多 resources\n  edit          在服务器上编辑一个资源\n  delete        Delete resources by filenames, stdin, resources and names, or by resources and label selector\n\nDeploy Commands:\n  rollout       Manage the rollout of a resource\n  scale         Set a new size "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" a Deployment, ReplicaSet or Replication Controller\n  autoscale     Auto-scale a Deployment, ReplicaSet, StatefulSet, or ReplicationController\n\nCluster Management Commands:\n  certificate   修改 certificate 资源.\n  cluster-info  显示集群信息\n  "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("top")]),s._v("           显示 Resource "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("CPU/Memory"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" 使用.\n  cordon        标记 "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("node")]),s._v(" 为 unschedulable\n  uncordon      标记 "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("node")]),s._v(" 为 schedulable\n  drain         Drain "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("node")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" preparation "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" maintenance\n  taint         更新一个或者多个 "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("node")]),s._v(" 上的 taints\n\nTroubleshooting and Debugging Commands:\n  describe      显示一个指定 resource 或者 group 的 resources 详情\n  logs          输出容器在 pod 中的日志\n  attach        Attach 到一个运行中的 container\n  "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("exec")]),s._v("          在一个 container 中执行一个命令\n  port-forward  Forward one or "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("more")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("local")]),s._v(" ports to a pod\n  proxy         运行一个 proxy 到 Kubernetes API server\n  "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("cp")]),s._v("            复制 files 和 directories 到 containers 和从容器中复制 files 和 directories.\n  auth          Inspect authorization\n  debug         Create debugging sessions "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" troubleshooting workloads and nodes\n\nAdvanced Commands:\n  "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("diff")]),s._v("          Diff live version against would-be applied version\n  apply         通过文件名或标准输入流"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("stdin"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("对资源进行配置\n  patch         Update field"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("s"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" of a resource\n  replace       通过 filename 或者 stdin替换一个资源\n  "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("wait")]),s._v("          Experimental: Wait "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" a specific condition on one or many resources.\n  kustomize     Build a kustomization target from a directory or URL.\n\nSettings Commands:\n  label         更新在这个资源上的 labels\n  annotate      更新一个资源的注解\n  completion    Output shell completion code "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" the specified shell "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("bash or "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("zsh")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\nOther Commands:\n  api-resources Print the supported API resources on the server\n  api-versions  Print the supported API versions on the server, "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" the form of "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"group/version"')]),s._v("\n  config        修改 kubeconfig 文件\n  plugin        Provides utilities "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" interacting with plugins.\n  version       输出 client 和 server 的版本信息\n\nUsage:\n  kubectl "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("flags"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("options"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n\nUse "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"kubectl <command> --help"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("more")]),s._v(" information about a given command.\nUse "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"kubectl options"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" a list of global command-line options "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("applies to all commands"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(".\n\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br"),a("span",{staticClass:"line-number"},[s._v("29")]),a("br"),a("span",{staticClass:"line-number"},[s._v("30")]),a("br"),a("span",{staticClass:"line-number"},[s._v("31")]),a("br"),a("span",{staticClass:"line-number"},[s._v("32")]),a("br"),a("span",{staticClass:"line-number"},[s._v("33")]),a("br"),a("span",{staticClass:"line-number"},[s._v("34")]),a("br"),a("span",{staticClass:"line-number"},[s._v("35")]),a("br"),a("span",{staticClass:"line-number"},[s._v("36")]),a("br"),a("span",{staticClass:"line-number"},[s._v("37")]),a("br"),a("span",{staticClass:"line-number"},[s._v("38")]),a("br"),a("span",{staticClass:"line-number"},[s._v("39")]),a("br"),a("span",{staticClass:"line-number"},[s._v("40")]),a("br"),a("span",{staticClass:"line-number"},[s._v("41")]),a("br"),a("span",{staticClass:"line-number"},[s._v("42")]),a("br"),a("span",{staticClass:"line-number"},[s._v("43")]),a("br"),a("span",{staticClass:"line-number"},[s._v("44")]),a("br"),a("span",{staticClass:"line-number"},[s._v("45")]),a("br"),a("span",{staticClass:"line-number"},[s._v("46")]),a("br"),a("span",{staticClass:"line-number"},[s._v("47")]),a("br"),a("span",{staticClass:"line-number"},[s._v("48")]),a("br"),a("span",{staticClass:"line-number"},[s._v("49")]),a("br"),a("span",{staticClass:"line-number"},[s._v("50")]),a("br"),a("span",{staticClass:"line-number"},[s._v("51")]),a("br"),a("span",{staticClass:"line-number"},[s._v("52")]),a("br"),a("span",{staticClass:"line-number"},[s._v("53")]),a("br"),a("span",{staticClass:"line-number"},[s._v("54")]),a("br"),a("span",{staticClass:"line-number"},[s._v("55")]),a("br"),a("span",{staticClass:"line-number"},[s._v("56")]),a("br"),a("span",{staticClass:"line-number"},[s._v("57")]),a("br"),a("span",{staticClass:"line-number"},[s._v("58")]),a("br"),a("span",{staticClass:"line-number"},[s._v("59")]),a("br"),a("span",{staticClass:"line-number"},[s._v("60")]),a("br"),a("span",{staticClass:"line-number"},[s._v("61")]),a("br"),a("span",{staticClass:"line-number"},[s._v("62")]),a("br"),a("span",{staticClass:"line-number"},[s._v("63")]),a("br"),a("span",{staticClass:"line-number"},[s._v("64")]),a("br"),a("span",{staticClass:"line-number"},[s._v("65")]),a("br"),a("span",{staticClass:"line-number"},[s._v("66")]),a("br"),a("span",{staticClass:"line-number"},[s._v("67")]),a("br"),a("span",{staticClass:"line-number"},[s._v("68")]),a("br"),a("span",{staticClass:"line-number"},[s._v("69")]),a("br")])]),a("h2",{attrs:{id:"核心组件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#核心组件"}},[s._v("#")]),s._v(" 核心组件")]),s._v(" "),a("h3",{attrs:{id:"node"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#node"}},[s._v("#")]),s._v(" Node")]),s._v(" "),a("h3",{attrs:{id:"pod"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#pod"}},[s._v("#")]),s._v(" Pod")]),s._v(" "),a("ul",[a("li",[a("p",[s._v("Pod是可以在 Kubernetes 中创建和管理的、最小的可部署的计算单元。")])]),s._v(" "),a("li",[a("p",[s._v("Pod 可以被理解成一群可以共享网络、存储和计算资源的容器化服务的集合.")])]),s._v(" "),a("li",[a("p",[s._v("同一个 Pod 之间的 Container 可以通过 localhost 互相访问，并且可以挂载 Pod 内所有的数据卷；但是不同的 Pod 之间的 Container 不能用 localhost 访问，也不能挂载其他 Pod 的数据卷。")])]),s._v(" "),a("li",[a("p",[s._v("一个 Pod 内可以有多个容器 container。")]),s._v(" "),a("ul",[a("li",[s._v("标准容器 Application Container。")]),s._v(" "),a("li",[s._v("初始化容器 Init Container。")]),s._v(" "),a("li",[s._v("边车容器 Sidecar Container。")]),s._v(" "),a("li",[s._v("临时容器 Ephemeral Container。")])])])]),s._v(" "),a("blockquote",[a("p",[s._v("https://zhuanlan.zhihu.com/p/651130502")])]),s._v(" "),a("div",{staticClass:"language-yaml line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-yaml"}},[a("code",[a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("apiVersion")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" v1    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 记录k8s的apiserver版本，目前都是v1")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("kind")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" Pod        "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 类型 Pod")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("metadata")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("         "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 记录了pod自身的元数据")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("name")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" memory"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("demo\n  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("namespace")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" mem"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("example   "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 所属的命名空间")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("spec")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("            "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 记录了pod内部资源的详细信息")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("containers")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 容器信息")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("name")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" memory"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("demo"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("ctr\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("image")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" polinux/stress \n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("resources")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 资源配额")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("limits")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("memory")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"200Mi"')]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("requests")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("memory")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"100Mi"')]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("command")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"stress"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 容器入口命令")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("args")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"--vm"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"1"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"--vm-bytes"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"150M"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"--vm-hang"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"1"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 入口命令参数")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("volumeMounts")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 挂载数据卷")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("name")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" redis"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("storage\n      "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("mountPath")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" /data/redis\n  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("volumes")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 数据卷信息")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("name")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" redis"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("storage\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("emptyDir")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br")])]),a("h3",{attrs:{id:"service"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#service"}},[s._v("#")]),s._v(" Service")]),s._v(" "),a("p",[s._v("将运行在一组 Pods 上的应用程序公开为网络服务的抽象方法。")]),s._v(" "),a("h3",{attrs:{id:"ingress"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ingress"}},[s._v("#")]),s._v(" Ingress")]),s._v(" "),a("p",[s._v("Ingress 是对集群中服务的外部访问进行管理的 API 对象，典型的访问方式是 HTTP。\nIngress 可以提供负载均衡、SSL 终结和基于名称的虚拟托管。")]),s._v(" "),a("h3",{attrs:{id:"configmap"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#configmap"}},[s._v("#")]),s._v(" ConfigMap")]),s._v(" "),a("h3",{attrs:{id:"secret"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#secret"}},[s._v("#")]),s._v(" Secret")]),s._v(" "),a("h3",{attrs:{id:"volumes"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#volumes"}},[s._v("#")]),s._v(" Volumes")]),s._v(" "),a("h3",{attrs:{id:"deployment"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#deployment"}},[s._v("#")]),s._v(" Deployment")]),s._v(" "),a("p",[s._v("Deployment 的作用是管理和控制 Pod 和 ReplicaSet，管控它们运行在用户期望的状态中")]),s._v(" "),a("ul",[a("li",[s._v("部署无状态应用")])]),s._v(" "),a("h3",{attrs:{id:"statefulset"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#statefulset"}},[s._v("#")]),s._v(" StatefulSet")]),s._v(" "),a("ul",[a("li",[s._v("部署有状态应用")])]),s._v(" "),a("h2",{attrs:{id:"架构"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#架构"}},[s._v("#")]),s._v(" 架构")]),s._v(" "),a("ul",[a("li",[s._v("kubectl")]),s._v(" "),a("li",[s._v("master\n"),a("ul",[a("li",[s._v("Control plane\n"),a("ul",[a("li",[s._v("API server")]),s._v(" "),a("li",[s._v("scheduler")]),s._v(" "),a("li",[s._v("Controller Manager\n"),a("ul",[a("li",[s._v("监控和检测故障")])])]),s._v(" "),a("li",[s._v("etcd\n"),a("ul",[a("li",[s._v("存储集群中所有资源对象的信息")])])]),s._v(" "),a("li",[s._v("云控制管理器（使用云服务商的集群时会有）")])])])])]),s._v(" "),a("li",[s._v("Node\n"),a("ul",[a("li",[s._v("kubelet")]),s._v(" "),a("li",[s._v("kube-proxy")]),s._v(" "),a("li",[s._v("container-runtime")])])])]),s._v(" "),a("h2",{attrs:{id:"cni-容器网络接口"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#cni-容器网络接口"}},[s._v("#")]),s._v(" CNI 容器网络接口")]),s._v(" "),a("h2",{attrs:{id:"csi-容器存储接口"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#csi-容器存储接口"}},[s._v("#")]),s._v(" CSI 容器存储接口")]),s._v(" "),a("h2",{attrs:{id:"cri-容器运行时接口"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#cri-容器运行时接口"}},[s._v("#")]),s._v(" CRI 容器运行时接口")]),s._v(" "),a("ul",[a("li",[s._v("主要的运行时\n"),a("ul",[a("li",[s._v("RunC：  linux容器，比如docker")]),s._v(" "),a("li",[s._v("RunV：安全容器，轻量级虚拟机。比如kata、firecracker等")]),s._v(" "),a("li",[s._v("Wasm: 具体实现有WasmEdge")])])])]),s._v(" "),a("h2",{attrs:{id:"device-plugin"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#device-plugin"}},[s._v("#")]),s._v(" Device Plugin")]),s._v(" "),a("p",[s._v("通过Device Plugin机制支持GPU、RDMA、FPGA、InfiniBand等第三方设备资源")]),s._v(" "),a("h2",{attrs:{id:"nri-node资源接口"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#nri-node资源接口"}},[s._v("#")]),s._v(" NRI Node资源接口")]),s._v(" "),a("ul",[a("li",[s._v("典型：基于NRI扩展Kubelete CPU管理能力，比如感知L3 cache的智能绑核。")])]),s._v(" "),a("h2",{attrs:{id:"ingress-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ingress-2"}},[s._v("#")]),s._v(" Ingress")]),s._v(" "),a("ul",[a("li",[s._v("入口流量的标准规范")]),s._v(" "),a("li",[s._v("Gateway API")])]),s._v(" "),a("h2",{attrs:{id:"调度器扩展-scheduling-framework"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#调度器扩展-scheduling-framework"}},[s._v("#")]),s._v(" 调度器扩展 Scheduling Framework")]),s._v(" "),a("ul",[a("li",[s._v("离线调度方案")])]),s._v(" "),a("h2",{attrs:{id:"ccm扩展"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ccm扩展"}},[s._v("#")]),s._v(" CCM扩展")]),s._v(" "),a("h2",{attrs:{id:"api扩展-apserver-原生资源cm扩展"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#api扩展-apserver-原生资源cm扩展"}},[s._v("#")]),s._v(" API扩展  APServer + 原生资源CM扩展")]),s._v(" "),a("ul",[a("li",[s._v("dynamic admission control 动态准入控制")]),s._v(" "),a("li",[s._v("CRD+Operator\n"),a("ul",[a("li",[s._v("定制自己的工作负载类型，支持原地升级、灰度发布等高级策略 OpenKruise")])])]),s._v(" "),a("li",[s._v("Aggregated APIServer 客户定制api需求的解决方案\n"),a("ul",[a("li",[s._v("metrics server")])])])]),s._v(" "),a("h3",{attrs:{id:"operator-sdk-工作流"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#operator-sdk-工作流"}},[s._v("#")]),s._v(" Operator SDK 工作流")]),s._v(" "),a("p",[s._v("开发一个新的 Operator：")]),s._v(" "),a("ol",[a("li",[s._v("使用 SDK 创建一个新的 Operator 项目")]),s._v(" "),a("li",[s._v("通过添加自定义资源（CRD）定义新的资源 API")]),s._v(" "),a("li",[s._v("指定使用 SDK API 来 watch 的资源")]),s._v(" "),a("li",[s._v("定义 Operator 的协调（reconcile）逻辑")]),s._v(" "),a("li",[s._v("使用 Operator SDK 构建并生成 Operator 部署清单文件")])]),s._v(" "),a("h2",{attrs:{id:"排查"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#排查"}},[s._v("#")]),s._v(" 排查")]),s._v(" "),a("p",[a("img",{attrs:{src:"image/k8s%E7%AC%94%E8%AE%B0/1703669619735.png",alt:"1703669619735"}})])])}),[],!1,null,null,null);n.default=e.exports}}]);