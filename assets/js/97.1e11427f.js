(window.webpackJsonp=window.webpackJsonp||[]).push([[97],{504:function(s,n,e){"use strict";e.r(n);var a=e(56),t=Object(a.a)({},(function(){var s=this,n=s.$createElement,e=s._self._c||n;return e("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[e("h1",{attrs:{id:"dpkg-deb-b-构建-deb-包"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#dpkg-deb-b-构建-deb-包"}},[s._v("#")]),s._v(" dpkg-deb -b 构建 deb 包")]),s._v(" "),e("p",[s._v("1.首先生成项目目录\n"),e("code",[s._v("# mkdir -p one_demo/opt")])]),s._v(" "),e("p",[s._v("2.进入目录中\n"),e("code",[s._v("# cd one_demo/opt")])]),s._v(" "),e("p",[s._v("3.生成编辑文件-简单做个 python 例子")]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# touch one_demo.py")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# vim one_demo.py")]),s._v("\n以下是文件内容\n------\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#！/usr/bin/python")]),s._v("\nprint "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"one_demo"')]),s._v("\n------\n保存后退出\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br")])]),e("p",[s._v("4.加执行权限\n"),e("code",[s._v("# chmod +x one_demo.py")])]),s._v(" "),e("p",[s._v("5.回到 one_demo 主目录下，生成 DEBIAN 目录\n"),e("code",[s._v("# mkdir DEBIAN")])]),s._v(" "),e("p",[s._v("6.编写 control 信息")]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# cd DEBIAN")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# touch control")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# vim control")]),s._v("\n\n以下是control内容\n------\nPackage: one-demo  "),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#  软件包的名字含有不是小写字母或 -+ 的字符")]),s._v("\nVersion: "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.0")]),s._v("\nSection: BioInfoServ\nPriority: optional\nDepends:\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 此处是相关的依赖包，多个用逗号隔开，如有确切版本，则可以 python-django (= 1.11.5)")]),s._v("\nSuggests:\nArchitecture: amd64\nInstalled-Size: "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("4096")]),s._v("\nMaintainer: gatieme\nProvides: bioinfoserv-arb\nDescription: A "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("test")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" using dpkg cmd\n------\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br"),e("span",{staticClass:"line-number"},[s._v("14")]),e("br"),e("span",{staticClass:"line-number"},[s._v("15")]),e("br"),e("span",{staticClass:"line-number"},[s._v("16")]),e("br"),e("span",{staticClass:"line-number"},[s._v("17")]),e("br"),e("span",{staticClass:"line-number"},[s._v("18")]),e("br"),e("span",{staticClass:"line-number"},[s._v("19")]),e("br")])]),e("p",[s._v("7.回到 one_demo 目录")]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[s._v("~/one_demo tree\n"),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(".")]),s._v("\n├── DEBIAN\n│   └── control\n└── opt\n    └── one_demo.py\n\n"),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" directories, "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" files\n\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br")])]),e("p",[s._v("8.接下来执行做包命令")]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 回到one_demo目录上层，")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# cd ..")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ls   # one_demo目录")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# dpkg-deb命令 -b表示构建deb包 源文件包 构建后的deb包")]),s._v("\n~ dpkg-deb -b one-demo one-demo-1.0-linux-amd64.deb\ndpkg-deb: 正在 "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v("'one-demo-1.0-linux-amd64.deb'")]),s._v(" 中构建软件包 "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v("'one-demo'")]),s._v("。\n~ "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("ls")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("grep")]),s._v(" one-demo\none-demo\none-demo-1.0-linux-amd64.deb\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br")])]),e("p",[s._v("9 提取对应 deb 包的 DEBIAN 目录到当前目录，内部含 control,confile,postinst 等等信息\n"),e("code",[s._v("dpkg-deb -e one-demo-1.0-linux-amd64.deb")])])])}),[],!1,null,null,null);n.default=t.exports}}]);